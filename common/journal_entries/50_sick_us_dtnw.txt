# state of the union
je_sick_us = {
	icon = "gfx/interface/icons/event_icons/event_election.dds"
	
   group = je_group_internal_affairs

   immediate = {
	set_variable = {
		name = sick_us_var
		value = 0
	}
   }
   
	possible = {
	}

	complete = {
		has_technology_researched = pan-nationalism	
	}

	fail = {
		custom_tooltip = {
			text = je_us_failure_tt
			var:sick_us_var >= 2
		}
	}

	on_fail = {
		#fire event falied us
		every_subject_or_below = {
			make_independent = yes
		}
		remove_modifier = shell_of_us
	}
	
	on_complete = {
	}
	
	current_value = {
		value = var:sick_us_var
	}

	goal_add_value = {
		add = 2
	}

	progressbar = yes

	weight = 10000
}

je_sick_us_mexcio = {
icon = "gfx/interface/icons/event_icons/event_election.dds"
	
   group = je_group_internal_affairs
   
	possible = {
	}

	immediate = {
	}

	complete = {
		AND = {
			is_at_war = no
			is_diplomatic_play_committed_participant = no
			#won war
			OR = {
				NOT = {exists = c:LOU}
				c:LOU = { overlord = c:WAH }
			}
			OR = {
				NOT = {exists = c:MIS}
				c:MIS = { overlord = c:WAH }
			}	
			}
	}

	fail = {
		AND = {
		is_at_war = no
		is_diplomatic_play_committed_participant = no
		
		AND = {
			exists = c:LOU
			c:LOU = { overlord = c:MEX }
		}
		AND = {
			exists = c:MIS
			c:MIS = { overlord = c:MEX }
		}
		}
	}

	#change tag of loyalists
	on_complete = {
		if = {
			limit = {NOT = {exists = c:LOU}}
			c:LOL = {change_tag = LOU}
		}
		if = {
			limit = {NOT = {exists = c:MIS}}
			c:MIL = {change_tag = MIS}
		}
	}

	on_fail = {
		change_variable = {
			name = sick_us_var
			add = 1
		}
		#add homeland jes to loyaists
		c:LOL = {add_journal_entry = {type = je_home_land_lol}}
		c:MIL = {add_journal_entry = {type = je_home_land_mil}}
		c:MIS = {
			remove_modifier = union_with_mexico
		}
		c:LOU = {
			remove_modifier = union_with_mexico
		}
	}
	
	on_timeout = {

	}


	weight = 10000
}

je_sick_us_spain = {
	icon = "gfx/interface/icons/event_icons/event_election.dds"
	
   group = je_group_internal_affairs
   
	possible = {
	}

	immediate = {
	}
	complete = {
		OR = {
			custom_tooltip = {
				text = je_sick_us_spain_comp
				NOT = {c:SPA = { has_claim = s:STATE_FLORIDA }}
			}
			owns_entire_state_region = STATE_FLORIDA
		}

	}
	fail = {
		OR = {
			custom_tooltip = {
				text = je_sick_us_spain_fail
				NOT = {has_claim = s:STATE_FLORIDA}
			}
			c:SPA = {owns_entire_state_region = STATE_FLORIDA}
		}
	}
	on_fail = {
		change_variable = {
			name = sick_us_var
			add = 1
		}
	}
}

